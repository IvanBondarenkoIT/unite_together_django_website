{% load static %}

{% if user.id is None %}
    {#    NOT LOGIN USER #}
    <nav class="ut-navbar shadow-sm">
        <div class="ut-navbar-wrapper">
            <div class="ut-navbar-logo-wrapper  desktop-navbar">
                <a class="logo-ut2" href="{% url 'home' %}">
                    <div class="logo-container">
                        <img class="main-logo" loading="lazy" alt="Logo"
                             src="{% static 'img/new-unite-together.jpg' %}"/>
                        <div class="logo-text">
                            <h4 class="logo-title">UNITE</h4>
                            <h6 class="logo-subtitle">TOGETHER</h6>
                        </div>
                    </div>
                </a>
            </div>
            <div class="connecter-inner desktop-navbar">
                <div class="frame-parent1">
                    <ul class="horizontal-menu">
                        <li class="ut-top-menu-li">
                            <div class="ut-top-menu-div">
                                <a class="ut-top-menu-text{% if '/about-us/' in request.path %}-active{% endif %}"
                                   href="{% url 'who_we_are' %}">Про нас</a>
                            </div>
                        </li>
                        <li class="ut-top-menu-li">
                            <div class="ut-top-menu-div">
                                <a class="ut-top-menu-text{% if '/events/' in request.path %}-active{% endif %}"
                                   href="{% url 'events' %}">Афіша</a>
                            </div>
                        </li>
                        <li class="ut-top-menu-li">
                            <div class="ut-top-menu-div">
                                <a class="ut-top-menu-text{% if '/projects/' in request.path %}-active{% endif %}"
                                   href="{% url 'projects' %}">Проєкти</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="right-part-wrapper-main desktop-navbar">
                <div class="right-part-main">
                    <div class="languages-wrapper">
                        <div class="languages1">
                            <div class="flag-ua-wrapper" style="transform: translateY(2px);">
                                <div class="flag-ua1">
                                    <div class="yellow-rectangle1"></div>
                                    <div class="blue-rectangle1"></div>
                                </div>
                            </div>
                            <div class="language-ua1">UA</div>
                            <div class="arrow-wrapper">
                                <img class="arrow-icon4" loading="lazy" alt="" src="{% static 'img/arrow1.svg' %}"/>
                            </div>
                        </div>
                    </div>
                    <a class="signup-button" href="{% url 'login' %}">
                        <div class="ut-button-w-icon">
                            <div style="display: flex;">
                                <img class="ut-icon" alt="" src="{% static 'img/usericon.svg' %}"/>
                            </div>
                            <span class="text">Логін/Реєстація</span>
                        </div>
                    </a>
                    <a class="donate-button" href="{% url 'donate-paypal' %}">
                        <div class="ut-button-w-icon">
                            <div class="ut-text" style="transform: translateY(1px);">Донат</div>
                            <div style="display: flex;">
                                <img class="ut-icon" alt="" src="{% static 'img/donateicon.svg' %}"/>️
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <!-- Mobile Navbar -->

            <div class="mobile-navbar">
                <a class="logo-ut2" href="{% url 'home' %}">
                    <div class="logo-container">
                        <img class="main-logo" loading="lazy" alt="Logo"
                             src="{% static 'img/new-unite-together.jpg' %}"/>
                        <div class="logo-text">
                            <h4 class="logo-title">UNITE</h4>
                            <h6 class="logo-subtitle">TOGETHER</h6>
                        </div>
                    </div>
                </a>
                <div class="hamburger-menu" onclick="toggleDropdown()">☰</div>
            </div>
            <div class="dropdown-menu" id="dropdown-menu">
                <a href="{% url 'who_we_are' %}">Про нас</a>
                <a href="{% url 'events' %}">Афіша</a>
                <a href="{% url 'projects' %}">Проєкти</a>
                <a href="{% url 'login' %}">Логін/Реєстація</a>
                <a href="{% url 'donate-paypal' %}">Донат</a>
            </div>
        </div>
    </nav>
{% else %}
    {#    LOGIN USER #}
    <nav class="ut-navbar shadow-sm">
        <div class="ut-navbar-wrapper">

            <div class="ut-navbar-logo-wrapper desktop-navbar">
                <a class="logo-ut2" href="{% url 'home' %}">
                    <div class="logo-container">
                        <img class="main-logo" loading="lazy" alt="Logo"
                             src="{% static 'img/new-unite-together.jpg' %}"/>
                        <div class="logo-text">
                            <h4 class="logo-title">UNITE</h4>
                            <h6 class="logo-subtitle">TOGETHER</h6>
                        </div>
                    </div>
                </a>
            </div>
            <div class="navbaraccount-inner1 desktop-navbar">
                <div class="about-us-parent7">
                    <a class="ut-top-menu-text{% if '/about-us/' in request.path %}-active{% endif %}"
                       href="{% url 'who_we_are' %}">Про нас</a>
                    <a class="ut-top-menu-text{% if '/events/' in request.path %}-active{% endif %}"
                       href="{% url 'events' %}">Афіша</a>
                    <a class="ut-top-menu-text{% if '/projects/' in request.path %}-active{% endif %}"
                       href="{% url 'projects' %}">Проєкти</a>
                </div>
            </div>
            <div class="navbaraccount-inner2 desktop-navbar">
                <div class="language-picker-parent">
                    <div class="language-picker">
                        <div class="languages12">
                            <div class="u-a-language">
                                <div class="flag-ua12">
                                    <div class="u-a-flag-colors"></div>
                                    <div class="u-a-flag-colors1"></div>
                                </div>
                            </div>
                            <div class="language-ua12">UA</div>
                            <div class="arrow-wrapper8">
                                <img class="arrow-icon12" alt="" src="{% static 'img/arrow.svg' %}"/>
                            </div>
                        </div>
                    </div>
                    <div class="language-divider">
                        <img class="dividing-line-icon12" alt="" src="{% static 'img/dividingline1.svg' %}"/>
                    </div>
                    <div class="frame-parent65">
                        <img class="frame-child29" alt="" src="{% static 'img/group-1000001845.svg' %}"/>
                        <div class="ellipse-parent2">
                            <div class="frame-child30"></div>
                            <a class="icon-wrapper50" href="{% url 'event_list' %}">
                                <div class="width-change-size-here28">
                                    <div class="ignore136"></div>
                                    <div class="ignore137"></div>
                                </div>
                                <div class="icon-wrapper-h28">
                                    <div class="height-change-size-here28">
                                        <div class="ignore138"></div>
                                        <div class="ignore139"></div>
                                    </div>
                                    <img class="icon-wrapper51" alt="" src="{% static 'img/iconwrapper@2x.png' %}"/>
                                </div>
                            </a>
                        </div>
                        <div class="avatar6 dropdown">
                            <a href="javascript:void(0);" onclick="toggleUserDropdown()">
                                <img class="avatar-placeholder-change-i2" alt=""
                                     src="{% static 'img/avatarplaceholder--change-image-here@2x.png' %}"/>
                            </a>
                            <div class="dropdown-menu" id="user-dropdown">
                                <br>
                                <h4 style="margin-left: 15px">{{ user.associated_person.last_name }} {{ user.associated_person.first_name }}</h4>
{#                                <a href="{% url 'dashboard' %}">{{ user.associated_person }}</a>#}

                                <a href="{% url 'associated_person_list' %}">Мій акаунт</a>
                                <a href="{% url 'registered_events' %}">Ваші Події</a>
                                <a href="{% url 'settings' %}">Налаштування</a>
                                <a href="{% url 'logout' %}">Вихід</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mobile Navbar -->

            <div class="mobile-navbar">
                <a class="logo-ut2" href="{% url 'home' %}">
                    <div class="logo-container">
                        <img class="main-logo" loading="lazy" alt="Logo"
                             src="{% static 'img/new-unite-together.jpg' %}"/>
                        <div class="logo-text">
                            <h4 class="logo-title">UNITE</h4>
                            <h6 class="logo-subtitle">TOGETHER</h6>
                        </div>
                    </div>
                </a>

                <div class="hamburger-menu" onclick="toggleDropdown()">☰</div>
            </div>
            <div class="dropdown-menu" id="dropdown-menu">
                <h4 style="margin-left: 15px">{{ user.associated_person.last_name }} {{ user.associated_person.first_name }}</h4>
                <a href="{% url 'who_we_are' %}">Про нас</a>
                <a href="{% url 'events' %}">Афіша</a>
                <a href="{% url 'projects' %}">Проєкти</a>
                <br>
{#                <a href="{% url 'associated_person_list' %}">{{ user.associated_person }}</a>#}
                <a href="{% url 'associated_person_list' %}">Мій акаунт</a>
                <a href="{% url 'registered_events' %}">Ваші Події</a>
                <a href="{% url 'settings' %}">Налаштування</a>
                <a href="{% url 'logout' %}">Вихід</a>
            </div>
            {#        </header>#}
        </div>
    </nav>
{% endif %}

{% include 'includes/alerts.html' %}

<script>
    function toggleDropdown() {
        var dropdown = document.getElementById('dropdown-menu');
        dropdown.classList.toggle('active');
    }

    function toggleUserDropdown() {
        var dropdown = document.getElementById('user-dropdown');
        dropdown.classList.toggle('active');
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function (event) {
        if (!event.target.matches('.avatar-placeholder-change-i2') && !event.target.matches('.hamburger-menu')) {
            var dropdowns = document.getElementsByClassName("dropdown-menu");
            for (var i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('active')) {
                    openDropdown.classList.remove('active');
                }
            }
        }
    }
</script>